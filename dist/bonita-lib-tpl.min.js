angular.module("bonita.ui",["bonitable","bonita.templates","bonita.sortable","bonita.selectable","bonita.repeatable","bonita.settings"]),angular.module("bonitable",[]).controller("BonitableController",function(){}).directive("bonitable",function(){return{controller:"BonitableController"}}),angular.module("bonita.selectable",[]).controller("SelectableController",function(){function e(e){return e.isChecked()}function t(e){return e.data}var n=[];this.registerSelector=function(e){n.push(e)};var l={$selectedItems:function(){return n.filter(e).map(t)},$allSelected:function(){return this.$selectedItems.length===n.length},$indeterminate:function(){return this.$selectedItems.length!==n.length&&this.$selectedItems.length>0}};Object.keys(l).forEach(function(e){Object.defineProperty(this,e,{get:l[e],enumerable:!0,iterable:!0})},this),this.$toggleAll=function(){var e=!this.$allSelected;n.forEach(function(t){t.setChecked(e)})}}).directive("boSelectable",function(){return{scope:!0,restrict:"A",controller:"SelectableController",controllerAs:"selecter"}}).directive("boSelectall",function(){return{restrict:"A",require:"^boSelectable",replace:!0,template:'<input type="checkbox" ng-checked="selecter.$allSelected" ng-click="selecter.$toggleAll()">',link:function(e,t,n,l){e.$watch(function(){return l.$indeterminate},function(e){t[0].indeterminate=e})}}}).directive("boSelector",function(){return{restrict:"A",require:"^boSelectable",link:function(e,t,n,l){function r(){e.$apply()}var i=t.controller("ngModel"),a={data:e.$eval(n.boSelector),isChecked:function(){return i&&i.$modelValue===!0||t[0].checked},setChecked:function(e){i?(i.$setViewValue(e===!0),i.$render()):t[0].checked=e}};t.on("change",r),l.registerSelector(a)}}}),angular.module("bonita.repeatable",[]).directive("columnTemplate",["$compile",function(e){return{restrict:"A",scope:{template:"=columnTemplate"},link:function(t,n){var l=angular.element(t.template),r=angular.element("<div></div>");angular.forEach(l[0].attributes,function(e){r.attr(e.name,l.attr(e.name))}),n.append(e(r.append(l.contents()))(t.$parent))}}}]).directive("boRepeatable",function(){return{restrict:"A",compile:function(e,t){function n(e){return null===e.th.getAttribute("data-ignore")}function l(e,t){return t[e]===!0}var r=t[this.name]||"thead tr:last-child",i="tr[ng-repeat]",a=e[0].querySelector(r),o=e[0].querySelector(i);if(!a||!o||a.children.length!==o.children.length)throw new Error("bo-repeatable th number does not correspond to td number. please verify you html table");var s=[],c=o.children,u=t.visibleProp||"visible";return s=[].map.call(a.children,function(e,t){return{th:e,td:c[t]}}).filter(n).map(function(e){angular.element(e.th).remove(),angular.element(e.td).remove();var t={name:e.th.textContent,header:e.th.outerHTML,cell:e.td.outerHTML};return t[u]=!0,t}),angular.element(a).append('<th column-template="column.header" ng-repeat="column in $columns | filter:$visibilityFilter"></th>'),angular.element(o).append('<td column-template="column.cell" ng-repeat="column in $columns | filter:$visibilityFilter"></td>'),function(e){e.$columns=s,e.$visibilityFilter=l.bind(null,u)}}}}).directive("repeatableConfig",function(){return{priority:1,link:function(e,t,n){e.$watch(n.repeatableConfig,function(t){var l=n.visibleProp||"visible";if(t.length!==e.$columns.length)throw new Error("repeatable-config size differ from $columns size. Please check your config attr");e.$columns.forEach(function(e,n){e[l]=t[n]})})}}}),function(){"use strict";angular.module("bonita.sortable",[]).directive("boSorter",function(){return{restrict:"A",scope:{sortOptions:"=",onSort:"&"},templateUrl:"template/sortable/sorter.tpl.html",transclude:!0,link:function(e,t,n){e.property=(n.id||n.boSorter||"").trim(),e.property&&t.addClass("pointer"),e.sort=function(){e.sortOptions.property===e.property?e.sortOptions.ascendant=!e.sortOptions.ascendant:e.property&&(e.sortOptions.property=e.property,e.sortOptions.ascendant=!0),e.onSort()(e.sortOptions)}}}})}(),angular.module("bonita.settings",["ui.bootstrap.dropdown","ui.bootstrap.buttons"]).directive("tableSettings",function(){return{templateUrl:"template/table-settings/tableSettings.tpl.html",replace:!0,scope:{columns:"=",sizes:"=",pageSize:"=",labelProp:"@",visibleProp:"@",updatePageSize:"&",updateVisibility:"&"},link:function(e,t,n){e.visible=n.visibleProp||"visible",e.label=n.labelProp||"id"}}}),function(e){try{e=angular.module("bonita.templates")}catch(t){e=angular.module("bonita.templates",[])}e.run(["$templateCache",function(e){e.put("template/sortable/sorter.tpl.html",'<span ng-click="sort()" ng-transclude></span>\n<span ng-click="sort()" class="glyphicon" ng-class="{\'glyphicon-chevron-up\':sortOptions.ascendant &amp;&amp; sortOptions.property === property, \'glyphicon-chevron-down\':!sortOptions.ascendant &amp;&amp; sortOptions.property === property}"></i>\n')}])}(),function(e){try{e=angular.module("bonita.templates")}catch(t){e=angular.module("bonita.templates",[])}e.run(["$templateCache",function(e){e.put("template/table-settings/tableSettings.tpl.html",'<div class="btn-group pull-right" dropdown>\n  <button type="button btn-default"\n    id="aria-tablesettings"\n    class="btn dropdown-toggle"\n    title="{{\'Table settings\' | translate}}"\n    ng-disabled="tasks.length === 0"\n    aria-labelledby="aria-tablesettings">\n    <i class="icon icon-gear"></i>\n    <span class="sr-only">{{\'Table settings\' | translate}}</span>\n    <span class="caret"></span>\n  </button>\n\n  <div class="TableSettings dropdown-menu pull-right" role="menu" aria-labelledby="aria-tablesettings">\n    <h5 class="TableSettings-title" >{{\'Items per page \'| translate}}</h5>\n    <div class="btn-group TableSettings-pagesizes">\n      <button class="btn btn-default"\n        type="button"\n        style="width:{{100/sizes.length}}%"\n        ng-repeat="size in sizes"\n        ng-model="$parent.pageSize" btn-radio="{{size}}"\n        ng-change="updatePageSize({size:size})" tabindex="0">\n        {{size}}\n      </button>\n    </div>\n\n    <h5 class="TableSettings-title" >{{\'Columns Selection\' | translate}}</h5>\n    <ul class="TableSettings-Columns">\n      <li  ng-repeat="field in columns">\n      <label\n        class="ColumnsItem"\n        title="{{(field.selected ? \'Hide\' : \'Show\') +\' \'+ field[label] }}"\n        ng-click="$event.stopPropagation()">\n        <input type="checkbox" ng-model="field[visible]" ng-change="updateVisibility({field:field})">\n        {{field[label]}}\n      </label>\n      </li>\n    </ul>\n  </div>\n</div>\n')}])}();